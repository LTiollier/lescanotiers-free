project-orchestrator - 2026-01-12 22:24:53 - Fix infinite loop in AI image generation

Problème identifié:
- Boucle infinie d'appels HTTP dans AIImageGenerationDialog.tsx
- Cause: useEffect avec dépendances `reset` et `generateImage` qui se recréent à chaque render
- Les fonctions n'étaient pas mémorisées avec useCallback dans le hook useAIImageGeneration

Correction appliquée:
- Import de useCallback dans src/hooks/useAIImageGeneration.ts
- Wrapping de generateImage() avec useCallback(async () => {...}, [])
- Wrapping de reset() avec useCallback(() => {...}, [])
- Stabilisation des références de fonctions pour éviter les re-renders

Impact:
✓ L'API Puter.js n'est appelée qu'une seule fois lors de l'ouverture du dialog
✓ Plus de boucle infinie dans la console réseau
✓ Performance améliorée
✓ Comportement prévisible et stable

Fichiers modifiés:
- src/hooks/useAIImageGeneration.ts

---

HISTORIQUE PRÉCÉDENT:
project-orchestrator - 2026-01-12 22:16:13 - Puter.js AI Image Generation Integration

Travail effectué:
- Installation du SDK @heyputer/puter.js (v2.2.5) pour la génération d'images par IA
- Création de src/config/ai-prompts.ts avec pre-prompts optimisés et dictionnaire de traduction FR->EN (40+ légumes)
- Création de src/hooks/useAIImageGeneration.ts pour gérer la génération, les états et la conversion HTMLImageElement->File
- Création de src/components/AIImageGenerationDialog.tsx pour l'interface utilisateur (dialog avec preview et régénération)
- Intégration dans src/components/VegetableForm.tsx avec bouton "Générer avec IA" (activé uniquement si nom saisi)
- Mise à jour de .env.example avec documentation Puter.js (aucune clé API requise)
- Documentation complète dans DEPLOYMENT.md avec guide d'utilisation, configuration technique et dépannage

Fonctionnalités:
✓ Génération automatique d'images réalistes de légumes avec style photographique professionnel
✓ Pre-prompt optimisé: "High-quality realistic photograph of a fresh {vegetable_name}, centered in frame..."
✓ Traduction automatique français->anglais pour améliorer la qualité des résultats
✓ Conversion automatique HTMLImageElement -> File pour upload vers Supabase Storage
✓ Interface complète: génération, preview, régénération, validation
✓ Gestion des états: idle, generating, success, error
✓ 100% gratuit, sans clé API, sans inscription, sans tracking
✓ Support multi-modèles: GPT Image-1 (défaut), GPT Image-1.5, Stable Diffusion 3

Architecture:
- config/ai-prompts.ts: Configuration centralisée des prompts et traductions
- hooks/useAIImageGeneration.ts: Logique métier de génération
- components/AIImageGenerationDialog.tsx: Interface utilisateur
- components/VegetableForm.tsx: Intégration dans le formulaire existant
